CREATE EXTENSION pg_exclusive_backup;
SELECT 1 FROM pg_start_backup('test', true);
 ?column? 
----------
        1
(1 row)

SELECT pg_is_in_backup();
 pg_is_in_backup 
-----------------
 t
(1 row)

-- Suppress NOTICE message about WAL archiving that pg_stop_backup()
-- emits because its content can vary depending on WAL archiving
-- configuration in the server.
SET client_min_messages TO 'warning';
SELECT 1 FROM pg_stop_backup();
 ?column? 
----------
        1
(1 row)

RESET client_min_messages;
SELECT pg_is_in_backup();
 pg_is_in_backup 
-----------------
 f
(1 row)

